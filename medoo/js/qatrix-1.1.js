(function(t,h,l){var u=h.documentElement,E=/(^\n+)|(\n+$)/g,O=/^(?:\{.*\}|\[.*\])$/,P=/-([a-z])/ig,Q=/\r\n/g,R=/[\-\+0-9\.]/ig,x=/\s+/,S=/\?/,T=/opacity=([^)]*)/,U=/^[\],:{}\s]*$/,V=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,W=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,X=/(?:^|:|,)(?:\s*\[)+/g,F=["height","margin-top","margin-bottom","padding-top","padding-bottom"],G={},H={},I=[],J=function(){$each(I,function(a,b){b()});h.removeEventListener("DOMContentLoaded",J,!1)},w=function(a,b){var c=typeof b;if("string"===c){var f=(a&&a.ownerDocument||h).createDocumentFragment(),e=$new("div");for(e.innerHTML=b;null!=e.childNodes[0];)f.appendChild(e.childNodes[0]);b=f}"number"===c&&(b+="");return b},d=function(a,b){if(null!==a){if(b===l)return a;var c=0,f=a.length;if(f!==l){if(0<f)for(;c<f&&!1!==b.call(a[c],a[c],a[c++]););return a}return b.call(a,a)}},K=function(a,b,c,f){return d(a,function(a){var e={},g="show"===b,d=a.style,m=a._display,l;if(!m){m=$style.get(a,"display");if("none"===m||"inherit"===m)l=$append(h.body,$new(a.nodeName)),m=$style.get(l,"display"),$remove(l);a._display=m}g?d.display=m:m="none";c?($style.get(a,"overflow"),d.overflow="hidden",e.opacity=g?{from:0,to:1}:{from:1,to:0},$each(F,function(c,b){e[b]=g?{from:0,to:$style.get(a,b)}:0}),$animate(a,e,c,function(){$each(F,function(c,b){$css.set(a,b,"")});d.filter=d.opacity=d.overflow="";d.display=m;f&&f.call(a)})):d.display=m})},L=function(a,b){if("object"===typeof b){var c=[];$each(b,function(b,e){"object"===typeof e?c.push(L(a+"["+b+"]",e)):c.push(a+"["+$url(b)+"]="+$url(e))});return c.join("&")}return $url(a)+"="+$url(b)},M=h.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)},Y=h.getElementsByClassName?function(a,b,c){return d(a.getElementsByClassName(b),c)}:function(a,b,c){var f=[],e=RegExp("(^|\\s)"+b+"(\\s|$)");$tag(a,"*",function(c){e.test(c.className)&&f.push(c)});return d(f,c)},Z=h.querySelectorAll?function(a,b){return d(h.querySelectorAll(a),b)}:function(a,b){var c=n.Qselector.styleSheet,f=[];c.addRule(a,"q:a");$tag(h,"*",function(c){"a"===c.currentStyle.q&&f.push(c)});c.cssText="";return d(f,b)},aa={camelCase:function(a){return a.replace("-ms-","ms-").replace(P,function(b,c){return(c+"").toUpperCase()})},replace:function(a,b){for(var c in b)a=a.replace(RegExp(c,"ig"),b[c]);return a},slashes:function(a){return $string.replace(a,{"\\\\":"\\\\","\b":"\\b","\t":"\\t","\n":"\\n","\r":"\\r",'"':'\\"'})},trim:"".trim?function(a){return a.trim()}:function(a){return(a+"").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}},ba=t.localStorage?{set:function(a,b){localStorage[a]="object"===typeof b?$json.encode(b):b},get:function(a){a=localStorage[a];return $json.isJSON(a)?$json.decode(a):a||""},remove:function(a){localStorage.removeItem(a);return!0}}:{set:function(a,b){b="object"===typeof b?$json.encode(b):b;$data.set(n.storage,a,b);n.storage.save("Qstorage")},get:function(a){n.storage.load("Qstorage");return $data.get(n.storage,a)||""},remove:function(a){n.storage.load("Qstorage");$data.remove(n.storage,a);return!0}},ca={get:t.getComputedStyle?function(a,b){if(null!==a){var c=h.defaultView.getComputedStyle(a,null).getPropertyValue(b);return"auto"===c||""===c?0:c}return!1}:function(a,b){if(null!==a){var c="opacity"===b?T.test(a.currentStyle.filter)?.01*parseFloat(RegExp.$1)+"":1:a.currentStyle[$string.camelCase(b)];return"auto"===c?0:c}return!1},set:u.style.opacity!==l?function(a,b,c){return d(a,function(a){a.style[b]=c;return!0})}:function(a,b,c){return d(a,function(a){a.currentStyle&&a.currentStyle.hasLayout||(a.style.zoom=1);"opacity"===b?(a.style.filter="alpha(opacity="+100*c+")",a.style.zoom=1):a.style[b]=c;return!0})}},p;p=u.style;if(p.webkitTransition!==l||p.MozTransition!==l||p.OTransition!==l||p.msTransition!==l||p.transition!==l){p=u.style;var N=(p.webkitTransition!==l?"Webkit":p.MozTransition!==l?"Moz":p.OTransition!==l?"O":p.msTransition!==l?"ms":"")+"Transition";p=function(a,b,c,f){return d(a,function(a){var e=[],g=[],d=[],m=[],h=a.style,k;c=c||300;for(k in b)g[k]=$string.camelCase(k),b[k].from!==l?(b[k].to=b[k].to||0,e[k]=$css.number[k]?b[k].to:parseInt(b[k].to,10),d[k]=$css.unit(k,b[k].to),$style.set(a,g[k],parseInt(b[k].from,10)+d[k])):(e[k]=$css.number[k]?b[k]:parseInt(b[k],10),d[k]=$css.unit(k,b[k]),$style.set(a,g[k],$style.get(a,g[k]))),m.push(k);setTimeout(function(){h[N]="all "+c+"ms";$each(m,function(a,c){h[g[c]]=e[c]+d[c]})},15);setTimeout(function(){h[N]="";f&&f.call(a)},c);return a})}}else p=function(a,b,c,f){return d(a,function(a){var e=0,g=0,d=0,m=0,h=[],k=[],v=[],n=[],p=[],r;c=c||300;for(r in b)v.push($string.camelCase(r)),b[r].from!==l?(d=b[r].to,k.push($css.number[r]?b[r].from:parseInt(b[r].from,10)),$style.set(a,v[g],k[g]+$css.unit(r,d))):(d=b[r],k.push(parseInt($style.get(a,$string.camelCase(r)),10))),h.push($css.number[r]?d:parseInt(d,10)),n.push($css.unit(r,d)),g++,m++;for(d=0;30>d;d++)for(p[d]=[],g=0;g<m;g++)p[d][v[g]]=k[g]+(h[g]-k[g])/30*d+("opacity"===v[g]?"":n[g]);for(;30>g;g++)setTimeout(function(){for(g=0;g<m;g++)$style.set(a,v[g],p[e][v[g]]);e++},c/30*g);setTimeout(function(){for(g=0;g<m;g++)$style.set(a,v[g],h[g]+n[g]);f&&f.call(a)},c);return a})};for(var da={decode:t.JSON?function(a){return $json.isJSON(a)?JSON.parse($string.trim(a)):!1}:function(a){return $json.isJSON(a)?(new Function("return "+$string.trim(a)))():!1},encode:t.JSON?function(a){return JSON.stringify(a)}:function(a){a:{var b=[],c,f,e,d;for(c in a){e=a[c];f=typeof e;if("undefined"===f){a=void 0;break a}if("function"!==f){switch(f){case "object":d=null===e?e:e.getDay?'"'+(1E3-10*~e.getUTCMonth()+e.toUTCString()+1E3+e/1).replace(/1(..).*?(\d\d)\D+(\d+).(\S+).*(...)/,"$3-$1-$2T$4.$5Z")+'"':e.length?"["+function(){var a=[];$each(e,function(c,b){a.push("string"===typeof b?'"'+$string.slashes(b)+'"':b)});return a.join(",")}()+"]":$json.encode(e);break;case "number":d=isFinite(e)?e:null;break;case "boolean":case "null":d=e;break;case "string":d='"'+$string.slashes(e)+'"'}b.push('"'+c+'":'+d)}}a=b.join(",")}return"{"+a+"}"},isJSON:function(a){return"string"===typeof a&&""!==$string.trim(a)?U.test(a.replace(V,"@").replace(W,"]").replace(X,"")):!1}},A=navigator.userAgent.toLowerCase(),y={},B="msie firefox opera webkit iPad iPhone android".split(" "),C=B.length,z=6;C--;)y[B[C]]=-1<A.indexOf(B[C].toLowerCase());for(;12>z;z++)y["msie"+z]=-1<A.indexOf("msie "+z);y.is=function(a){return RegExp(a,"ig").test(A)};var n={$:function(a){return h.getElementById(a)},$each:function(a,b){var c=0,f=a.length,e=typeof a,d;if("array"===e||"object"===e&&f-1 in a)for(;c<f&&!1!==b.call(a[c],c,a[c++]););else if("object"===e)for(d in a)b.call(a[d],d,a[d]);else b.call(a,0,a);return a},$id:function(a,b){var c=[],f;$each(a instanceof Array?a:a.split(" "),function(a,b){f=$(b);null!==f&&c.push(f)});return b?d(c,b):c},$dom:function(a,b){b&&(a.length?d(a,b):b(a));return a},$tag:function(a,b,c){return d(a.getElementsByTagName(b),c)},$class:Y,$select:Z,$new:function(a,b){var c=h.createElement(a);if(b)try{return $each(b,function(a,b){switch(a){case "css":case "style":$css.set(c,b);break;case "innerHTML":case "html":$html(c,b);break;case "className":case "class":$className.set(c,b);break;case "text":$text(c,b);break;default:$attr.set(c,a,b)}}),c}catch(f){}finally{c=null}return c},$string:aa,$attr:{get:function(a,b){return a.getAttribute(b)},set:function(a,b,c){return d(a,function(a){a.setAttribute(b,c)})},remove:function(a,b){return d(a,function(a){a.removeAttribute(b)})}},$data:{get:function(a,b){var c=$attr.get(a,"data-"+b);return"true"===c?!0:"false"===c?!1:"null"===c?"":null===c?"":""===c?"":!isNaN(parseFloat(c))&&isFinite(c)?+c:O.test(c)?$json.decode(c):c},set:function(a,b,c){return d(a,function(a){c="object"===typeof c?$json.encode(c):c;"object"===typeof b?$each(b,function(c,b){$attr.set(a,"data-"+c,b)}):$attr.set(a,"data-"+b,c);return a})},remove:function(a,b){return d(a,function(a){$attr.remove(a,"data-"+b)})}},$storage:ba,$event:{guid:0,global:{},handler:{call:function(a,b,c,f){a=$event.handler;c.currentTarget=b;if(!1===f||!1===f.call(b,c))a.stopPropagation.call(c),a.preventDefault.call(c)},preventDefault:function(){var a=this.originalEvent;a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.stopPropagation()},mouseenter:function(a){return function(b){var c=b.relatedTarget;if(this!==c){for(;c&&c!==this;)c=c.parentNode;c!==this&&a.call(this,b)}}}},on:function(a,b,c,f,e){return d(a,function(a){if(3===a.nodeType||8===a.nodeType)return!1;if("object"===typeof b){"string"!==typeof c&&(f=f||c,c=l);for(type in b)$event.on(a,type,c,f,b[type]);return this}null==f&&null==e?(e=c,f=c=l):null==e&&("string"===typeof c?(e=f,f=l):(e=f,f=c,c=l));a.guid===l&&($event.guid++,a.guid=$event.guid,$event.global[$event.guid]={});var d=a.guid,q=(c||"")+b;$event.global[d][q]||($event.global[d][q]={});delegate_fn=function(b){var d={},g,q;$each("altKey bubbles button buttons cancelable relatedTarget clientX clientY ctrlKey fromElement offsetX offsetY pageX pageY screenX screenY shiftKey toElement timeStamp".split(" "),function(a,c){b[c]!==l&&(d[c]=b[c])});d.originalEvent=b;d.preventDefault=$event.handler.preventDefault;d.stopPropagation=$event.handler.stopPropagation;d.stopImmediatePropagation=$event.handler.stopImmediatePropagation;d.data=f;q=d.target=c?b.target||b.srcElement||h:a;d.which=b.which||b.charCode||b.keyCode;d.metaKey=b.metaKey||b.ctrlKey;if(c)for(g=c?c.replace(".",""):"";q!==a;q=q.parentNode){if(null===q||q===h.body)return!1;(q.tagName.toLowerCase()===c||$className.has(q,g))&&$event.handler.call(b,q,d,e)}else $event.handler.call(b,q,d,e)};if(a.addEventListener){if("mouseenter"===b||"mouseleave"===b)b="mouseenter"===b?"mouseover":"mouseout",delegate_fn=$event.handler.mouseenter(delegate_fn);a.addEventListener(b,delegate_fn,"blur"===b||"focus"===b)}else a.attachEvent("on"+b,delegate_fn);$event.global[d][q][e+""]=delegate_fn;return a})},off:function(a,b,c,f){if("object"===typeof b){for(type in b)$event.off(a,type,b[type]);return this}null==f&&(f=c,c=null);var e=a.guid;c=(c||"")+b;fn_key=f+"";f?(M(a,b,$event.global[e][c][fn_key]),delete $event.global[e][c][fn_key]):($each($event.global[e][c],function(c,f){M(a,b,f)}),delete $event.global[e][c])}},$clear:function(a){a&&(clearTimeout(a),clearInterval(a));return null},$ready:function(a){if("complete"===h.readyState)return setTimeout(a,1);if(h.addEventListener)I.push(a),h.addEventListener("DOMContentLoaded",J,!1);else{var b=function(){try{u.doScroll("left")}catch(c){setTimeout(b,1);return}a()};b()}},$css:{get:function(a,b){if("object"===typeof b){var c={};$each(b,function(b,e){c[e]=$style.get(a,e)});return c}return $style.get(a,b)},set:function(a,b,c){return d(a,function(a){"object"===typeof b?$each(b,function(b,c){$style.set(a,$string.camelCase(b),$css.fix(b,c))}):$style.set(a,$string.camelCase(b),$css.fix(b,c));return a})},number:{fontWeight:!0,lineHeight:!0,opacity:!0,zIndex:!0},unit:function(a,b){if($css.number[a])return"";var c=(b+"").replace(R,"");return""===c?"px":c},fix:function(a,b){"number"===typeof b&&!$css.number[a]&&(b+="px");return null===b&&isNaN(b)?!1:b}},$style:ca,$pos:function(a,b,c){return d(a,function(a){$style.set(a,"left",b+"px");$style.set(a,"top",c+"px");return a})},$offset:function(a){var b=h.body,c=a.getBoundingClientRect();return{top:c.top+(t.scrollY||b.parentNode.scrollTop||a.scrollTop)-(u.clientTop||b.clientTop||0),left:c.left+(t.scrollX||b.parentNode.scrollLeft||a.scrollLeft)-(u.clientLeft||b.clientLeft||0),width:a.offsetWidth,height:a.offsetHeight}},$append:function(a,b){return d(a,function(a){return a.appendChild(w(a,b))})},$prepend:function(a,b){return d(a,function(a){return a.firstChild?a.insertBefore(w(a,b),a.firstChild):a.appendChild(w(a,b))})},$before:function(a,b){return d(a,function(a){return a.parentNode.insertBefore(w(a,b),a)})},$after:function(a,b){return d(a,function(a){return a.nextSibling?a.parentNode.insertBefore(w(a,b),a.nextSibling):a.parentNode.appendChild(w(a,b))})},$remove:function(a){return d(a,function(a){$empty(a);a.guid!==l&&delete $event.global[a.guid];return null!==a&&a.parentNode?a.parentNode.removeChild(a):a})},$empty:function(a){return d(a,function(a){for(;a.firstChild;)1===a.nodeType&&a.guid!==l&&delete $event.global[a.guid],a.removeChild(a.firstChild);return a})},$html:function(a,b){return d(a,function(a){if(b){try{a.innerHTML=b}catch(f){$append($empty(a),b)}return a}return 1===a.nodeType?a.innerHTML:null})},$text:function(a,b){return d(a,function(a){if(b)return $empty(a),a.appendChild(h.createTextNode(b)),a;var c="",e=a.textContent;if((e||a.innerText)===a.innerHTML)c=e?$string.trim(a.textContent.replace(E,"")):a.innerText.replace(Q,"");else for(a=a.firstChild;a;a=a.nextSibling)if(e=a.nodeType,3===e&&""!==$string.trim(a.nodeValue)&&(c+=a.nodeValue.replace(E,"")+(a.nextSibling&&a.nextSibling.tagName&&"br"!==a.nextSibling.tagName.toLowerCase()?"\n":"")),1===e||2===e)c+=$text(a)+("block"===$style.get(a,"display")||"br"===a.tagName.toLowerCase()?"\n":"");return c})},$className:{add:function(a,b){return d(a,function(a){if(""===a.className)a.className=b;else{var c=a.className,e=[];$each(b.split(x),function(a,b){RegExp("\\b("+b+")\\b").test(c)||e.push(" "+b)});a.className+=e.join("")}return a})},set:function(a,b){return d(a,function(a){a.className=b;return a})},has:function(a,b){return RegExp("\\b("+b.split(x).join("|")+")\\b").test(a.className)},remove:function(a,b){return d(a,function(a){a.className=b?$string.trim(a.className.replace(RegExp("\\b("+b.split(x).join("|")+")\\b","g"),"").split(x).join(" ")):"";return a})}},$hide:function(a,b,c){K(a,"hide",b,c)},$show:function(a,b,c){K(a,"show",b,c)},$toggle:function(a,b,c){return d(a,function(a){"none"===$style.get(a,"display")?$show(a,b,c):$hide(a,b,c)})},$animate:p,$fadeout:function(a,b,c){return d(a,function(a){$animate(a,{opacity:{from:1,to:0}},b||500,c)})},$fadein:function(a,b,c){return d(a,function(a){$animate(a,{opacity:{from:0,to:1}},b||500,c)})},$cookie:{get:function(a){for(var b=h.cookie.split("; "),c=0,d=b.length,e;c<d;c++)if(e=b[c].split("="),e[0]===a)return a=decodeURIComponent(e[1]),$json.isJSON(a)?$json.decode(a):a+"";return null},set:function(a,b,c){if("object"===typeof a)return c=b,$each(a,function(a,b){$cookie.set(a,b,c)});var d=new Date;d.setTime(d.getTime());c=c?";expires="+(new Date(d.getTime()+864E5*c)).toGMTString():"";b="object"===typeof b?$json.encode(b):b;return h.cookie=a+"="+$url(b)+c+";path=/"},remove:function(){$each(arguments,function(a,b){$cookie.set(b,"",-1)});return!0}},$json:da,$ajax:function(a,b){"object"===typeof a&&(b=a,a=l);b=b||{};var c=t.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;a=a||b.url;var d=[],e;b.data&&$each(b.data,function(a,b){d.push(L(a,b))});e=d.join("&").replace(/%20/g,"+");"GET"===b.type?(c.open("GET",a+(S.test(a)?"&":"?")+e,!0),e=null):c.open(b.type||"POST",a,!0);c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");b.header&&$each(b.header,function(a,b){c.setRequestHeader(a,b)});c.send(e);c.onreadystatechange=function(){4===c.readyState&&(200===c.status&&b.success?(e=c.responseText,b.success(""!==e&&$json.isJSON(e)?$json.decode(e):e)):b.error&&b.error(c.status))}},$require:function(a,b){var c=[],d;$each(a,function(a,f){G[f]||(G[f]=!0,c.push(f),d=/\.css[^\.]*$/ig.test(f)?$new("link",{type:"text/css",rel:"stylesheet",href:f}):$new("script",{type:"text/javascript",async:!0,src:f}),d.onload=d.onreadystatechange=function(a){if("load"===a.type||/loaded|complete/.test(d.readyState))c.splice(c.indexOf(f),1),0===c.length&&b&&b()},$append(h.head||$tag(h,"head")[0]||u,d))})},$template:function(a,b){var c=H[a];c||(c="var s='';s+='"+a.replace(/[\r\t\n]/g," ").split("'").join("\\'").split("\t").join("'").replace(/\{\{#([\w]*)\}\}(.*)\{\{\/(\1)\}\}/ig,function(a,b,c){return"';var i=0,l=data."+b+".length,d=data."+b+";for(;i<l;i++){s+='"+c.replace(/\{\{(\.|this)\}\}/g,"'+d[i]+'").replace(/\{\{([\w]*)\}\}/g,"'+d[i].$1+'")+"'}s+='"}).replace(/\{\{(.+?)\}\}/g,"'+data.$1+'")+"';return s;",H[a]=c);return b?(new Function("data",c))(b):new Function("data",c)},$url:function(a){return encodeURIComponent(a)},$rand:function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},$browser:y},D;for(D in n)t[D]=n[D];n.version="1.1";t.Qatrix=n;$ready(function(){h.querySelectorAll||(n.Qselector=$append(h.body,$new("style")));t.localStorage||(n.storage=$append(h.body,$new("link",{style:{behavior:"url(#default#userData)"}})))});"function"===typeof define&&define.amd&&define("qatrix",[],n)})(window,document);